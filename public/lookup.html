<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Lookup</title>
<link rel="stylesheet" href="style.css">
</head>

<body>
<div class="container">
<h1>Lookup</h1>
<form id="f">
<input name="name" placeholder="Name" required>
<input name="email" type="email" placeholder="Email" required>
<input name="branch" placeholder="Branch" required>
<input name="hostelType" placeholder="Hostel Type" required>
<input name="hostel" placeholder="Hostel" required>
<input name="room" placeholder="Room" required>
<button>Search</button>
</form>
<div id="r"></div>
</div>
<script>
f.onsubmit = async e => {
  e.preventDefault();
  const d = Object.fromEntries(new FormData(f));
  const res = await fetch("https://findmyroomie-production.up.railway.app/api/lookup",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify(d)
  });
  const j = await res.json();
  r.innerHTML = j.success
    ? j.roommates.map(x=>`${x.name} (${x.branch}) - ${x.contactType}: ${x.contactValue}`).join("<br>")
    : j.message;
};
</script>
</body>
</html>
